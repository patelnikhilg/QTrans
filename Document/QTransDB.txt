CREATE TABLE tblmstusers 
  ( 
     userid             BIGINT IDENTITY(1, 1) NOT NULL, 
     emailaddress       VARCHAR(50) NULL, 
     firstname          VARCHAR(50) NOT NULL, 
     middlename         VARCHAR(50) NULL, 
     lastname           VARCHAR(50) NOT NULL, 
	 password           VARCHAR(10) NOT NULL, 
	 OTP				INT NOT NULL DEFAULT 0,
	 Token				VARCHAR(50) NULL, 
     mobilenumber       VARCHAR(15) NOT NULL, 
     landlinenumber     VARCHAR(20) NULL, 
     dob                DATETIME NULL, 
     addressline1       VARCHAR(200) NOT NULL, 
     addressline2       VARCHAR(200) NULL, 
     pincode            INT NOT NULL, 
     photo              VARCHAR(100) NULL, 
     country            VARCHAR(15) NOT NULL, 
     state              VARCHAR(20) NOT NULL, 
     district           VARCHAR(20) NOT NULL, 
     city               VARCHAR(20) NOT NULL, 
     area               VARCHAR(25) NULL, 
     mobileverification BIT NOT NULL DEFAULT (0), 
     emailverification  BIT NOT NULL DEFAULT (0), 
     pan                VARCHAR(10) NULL, 
     gst                VARCHAR(16) NULL, 
     aadhaarno          BIGINT NULL, 
     createddate        DATETIME NOT NULL  DEFAULT (getdate()), 
     modifydate         DATETIME NULL ,
	 CONSTRAINT [PK_tblmstusers_userid] PRIMARY KEY ([userid]) 
  ) 

go 

CREATE TABLE tblmstcompany 
  ( 
     companyid         BIGINT IDENTITY(1, 1) NOT NULL, 
     companyname       VARCHAR(100) NOT NULL, 
     address           VARCHAR(20) NOT NULL, 
     telenumber        VARCHAR(20) NOT NULL, 
     alternettelnumber VARCHAR(20) NULL, 
     country           VARCHAR(15) NOT NULL, 
     state             VARCHAR(20) NOT NULL, 
     city              VARCHAR(20) NOT NULL, 
     userid            BIGINT NOT NULL, 
     comanytype        INT NOT NULL, 
     createddate        DATETIME NOT NULL  DEFAULT (getdate()), 
     modifydate        DATETIME NULL,
	CONSTRAINT [PK_tblmstcompany_companyid] PRIMARY KEY ([companyid]) ,	
CONSTRAINT [FK_tblmstcompany_tblmstuser] FOREIGN KEY ([userid]) REFERENCES [tblmstusers]([userid]) 
  ) 

go 

CREATE TABLE tblmsttransporttype 
  ( 
     transporttypeid SMALLINT IDENTITY(1, 1) NOT NULL, 
     transporttype   VARCHAR(20) NOT NULL, 
     description     VARCHAR(200) NULL, 
	 CONSTRAINT [PK_tblmsttransporttype_transporttypeid] PRIMARY KEY ([transporttypeid]) 
  ) 

go 

CREATE TABLE tbldtltransporttype 
  ( 
     dtltransporttypeid SMALLINT IDENTITY(1, 1) NOT NULL, 
     transporttypeid    SMALLINT NOT NULL, 
     subtype            VARCHAR(20) NOT NULL, 
     description        VARCHAR(200) NULL, 
	 CONSTRAINT [PK_tbldtltransporttype_dtltransporttypeid] PRIMARY KEY ([dtltransporttypeid]) ,
	 CONSTRAINT [FK_tbldtltransporttype_MstTransportType] FOREIGN KEY ([transporttypeid]) REFERENCES [tblmsttransporttype]([transporttypeid]) 
  ) 

GO

CREATE TABLE tbldtlusers 
  ( 
     dtluserid       BIGINT IDENTITY(1, 1) NOT NULL, 
     userid          BIGINT NOT NULL, 
     companyid       BIGINT NOT NULL, 
     transporttypeid SMALLINT NOT NULL, 
     createddate     DATETIME NOT NULL  DEFAULT (getdate()), 
     modifydate      DATETIME NULL,
	CONSTRAINT [PK_tbldtlusers_dtluserid] PRIMARY KEY ([dtluserid]), 
CONSTRAINT [FK_tbldtlusers_tblmstuser] FOREIGN KEY ([userid]) REFERENCES [tblmstusers]([userid]) ,
CONSTRAINT [FK_tbldtlusers_tblmstcompany] FOREIGN KEY ([companyid]) REFERENCES [tblmstcompany]([companyid]) 	,
CONSTRAINT [FK_tbldtlusers_MstTransportType] FOREIGN KEY ([transporttypeid]) REFERENCES [tblmsttransporttype]([transporttypeid]) 
  ) 

go 

CREATE TABLE tblmstvehicle 
  ( 
     vehicleid             BIGINT IDENTITY(1, 1) NOT NULL, 
     vehicletype           VARCHAR(20) NOT NULL, 
     manufacturername      VARCHAR(20) NOT NULL, 
     descrition            VARCHAR(200) NULL, 
     manufactureryear      DATE NOT NULL, 
     totalwheel            SMALLINT NOT NULL, 
     weightcapacity        INT NOT NULL, 
     rcbookcopypath        VARCHAR(100) NULL, 
     rtoregistrationnumber VARCHAR(50) NOT NULL, 
     companyid             BIGINT NOT NULL, 
     registrationdate      DATETIME NOT NULL, 
     createddate           DATETIME NOT NULL DEFAULT (getdate()), 
     modifydate            DATETIME NULL, 
	 CONSTRAINT [PK_tblmstvehicle_vehicleid] PRIMARY KEY ([vehicleid]) 	 
  ) 

go 

CREATE TABLE tbldtlinsurance 
  ( 
     insuranceid     BIGINT IDENTITY(1, 1) NOT NULL, 
     insurancename   VARCHAR(100) NOT NULL, 
     insurancenumber VARCHAR(30) NULL, 
     companyname     VARCHAR(100) NOT NULL, 
     description     VARCHAR(200) NULL, 
     insurancedate   DATETIME NOT NULL, 
     expiredate      DATETIME NULL, 
     vehicleid       BIGINT NOT NULL, 
     createddate     DATETIME NOT NULL DEFAULT (getdate()), 
     modifydate      DATETIME NULL ,
	 CONSTRAINT [PK_tbldtlinsurance_insuranceid] PRIMARY KEY ([insuranceid]) ,	
	CONSTRAINT [FK_tbldtlinsurance_tblmstvehicle] FOREIGN KEY ([vehicleid]) REFERENCES [tblmstvehicle]([vehicleid]) 	 
  ) 

go 

CREATE TABLE tblmstmaterialtype 
  ( 
     materialtypeid SMALLINT IDENTITY(1, 1) NOT NULL, 
     materialtype   VARCHAR(50) NOT NULL, 
     description    VARCHAR(100) NULL,
CONSTRAINT [PK_tblmstmaterialtype_materialtypeid] PRIMARY KEY ([materialtypeid])	 
  ) 

go 




CREATE TABLE tblmstpackagetype 
  ( 
     packagetypeid SMALLINT IDENTITY(1, 1) NOT NULL, 
     packagetype   VARCHAR(50) NOT NULL, 
     description   VARCHAR(100) NULL,
	CONSTRAINT [PK_tblmstpackagetype_packagetypeid] PRIMARY KEY ([packagetypeid]) 	 
  ) 

go 

CREATE TABLE tblmstposting 
  ( 
     postingid         BIGINT IDENTITY(1, 1) NOT NULL, 
     posttype          VARCHAR(20) NOT NULL, 
     userid            BIGINT NOT NULL, 
     soureaddress      VARCHAR(200) NOT NULL, 
     destinationadress VARCHAR(200) NOT NULL, 
     materialtypeid    SmallINT NOT NULL, 
     description       VARCHAR(max) NULL, 
     packagetypeid     SmallINT NOT NULL, 
     packagetypedesc   VARCHAR(200) NULL, 
     createddate        DATETIME NOT NULL  DEFAULT (getdate()), 
     modifydate        DATETIME NULL ,
	 CONSTRAINT [PK_tblmstposting_postingid] PRIMARY KEY ([postingid]) ,
	 CONSTRAINT [FK_tblmstposting_tblmstuser] FOREIGN KEY ([userid]) REFERENCES [tblmstusers]([userid]) ,
	 CONSTRAINT [FK_tblmstposting_tblmstmaterialtype] FOREIGN KEY ([materialtypeid]) REFERENCES [tblmstmaterialtype]([materialtypeid]) ,
	 CONSTRAINT [FK_tblmstposting_tblmstpackagetype] FOREIGN KEY ([packagetypeid]) REFERENCES [tblmstpackagetype]([packagetypeid]) 
  )
go 

CREATE TABLE tblmstvehicletype 
  ( 
     vehicletypeid SMALLINT IDENTITY(1, 1) NOT NULL, 
     vechicletype  VARCHAR(50) NOT NULL, 
     description   VARCHAR(100) NULL,
CONSTRAINT [PK_tblmstvehicletype_vehicletypeid] PRIMARY KEY ([vehicletypeid])	 
  ) 

go 

CREATE TABLE tbldtlposting 
  ( 
     dtlpostingid            BIGINT IDENTITY(1, 1) NOT NULL, 
     postingid              BIGINT NOT NULL, 
     materialweight          INT NOT NULL, 
     materialphotos          VARCHAR(100) NULL, 
     packingdimension        VARCHAR(50) NULL, 
     numberpckets            INT NOT NULL, 
     vehicletype             SMALLINT NOT NULL, 
     novehicle               SMALLINT NOT NULL, 
     deliveryperiodday       SMALLINT NULL, 
     pickupdatetime          DATETIME NOT NULL, 
     postamount              DECIMAL NULL, 
     onpickuppercentage      SMALLINT NOT NULL, 
     onunloadingpercentage   SMALLINT NOT NULL, 
     creditday               INT NOT NULL, 
     contractstartdatetime   DATETIME NULL, 
     contractenddatetime     DATETIME NULL, 
     ordertype               DATETIME NOT NULL, 
     biddingactivatedatetime DATETIME NOT NULL, 
     biddingclosedatetime    DATETIME NOT NULL, 
     poststatus              SMALLINT NOT NULL, 
     gprs                    BIT NOT NULL, 
     menpowerloading         BIT NOT NULL, 
     menpowerunloading       BIT NOT NULL, 
     transporterinsurance    BIT NOT NULL, 
     tolltaxinclude          BIT NOT NULL, 
     remark                  VARCHAR(200) NULL, 
     loadingtype             BIT NOT NULL, 
     createddate             DATETIME NULL DEFAULT (getdate()), 
     modifydate              DATETIME NULL,
CONSTRAINT [PK_tbldtlposting_dtlpostingid] PRIMARY KEY ([dtlpostingid])	 ,	 
CONSTRAINT [FK_tbldtlposting_tblmstposting] FOREIGN KEY ([postingid]) REFERENCES [tblmstposting]([postingid]) 

  ) 

go 

CREATE TABLE tblmstbidding 
  ( 
     biddingid         BIGINT IDENTITY(1, 1) NOT NULL, 
     dtlpostingid         BIGINT NOT NULL, 
     userid            BIGINT NOT NULL, 
     amount            DECIMAL NOT NULL, 
     biddercomment     VARCHAR(500) NULL, 
     status            SMALLINT NOT NULL, 
     servicecharges    DECIMAL NOT NULL, 
     paymentmethod     SMALLINT NULL, 
     rating            SMALLINT NULL, 
     cancellationreson VARCHAR(200) NULL ,
	 createddate             DATETIME NULL DEFAULT (getdate()), 
     modifydate              DATETIME NULL ,
	 CONSTRAINT [PK_tblmstbidding_biddingid] PRIMARY KEY ([biddingid])	, 
	 CONSTRAINT [FK_tbldtlposting_tbldtlposting] FOREIGN KEY ([dtlpostingid]) REFERENCES [tbldtlposting]([dtlpostingid]) ,
	 CONSTRAINT [FK_tblmstbidding_tblmstuser] FOREIGN KEY ([userid]) REFERENCES [tblmstusers]([userid]) 
  ) 

go 

CREATE TABLE tbldtlbidding 
  ( 
     dtlbiddingid BIGINT IDENTITY(1, 1) NOT NULL, 
     vehicleno    SMALLINT NOT NULL, 
     capacity     SMALLINT NOT NULL, 
     biddingid    BIGINT NULL,
     CONSTRAINT [PK_tbldtlbidding_dtlbiddingid] PRIMARY KEY ([dtlbiddingid]),	
CONSTRAINT [FK_tbldtlbidding_tblmstbidding] FOREIGN KEY ([biddingid]) REFERENCES [tblmstbidding]([biddingid])  	 
  ) 

go 


CREATE TABLE tbluseraccess 
  ( 
	useraccessId BIGINT IDENTITY(1, 1) NOT NULL,
	UserId BIGINT NOT NULL, 
	StartDateTime DATETIME NOT NULL,
	EndDateTime DATETIME NOT NULL,
	NoBidding int NOT NULL,
	Enable bit NOT NULL,
	CONSTRAINT [PK_tbluseraccess_useraccessId] PRIMARY KEY ([useraccessId]),	
	CONSTRAINT [FK_tbluseraccess_tblmstuser] FOREIGN KEY ([userid]) REFERENCES [tblmstusers]([userid]) 
  ) 

go 

CREATE TABLE TblBiddingBlockList 
  ( 
	BlockListId BIGINT IDENTITY(1, 1) NOT NULL,	
	PostUserId BIGINT NOT NULL, 
	BiddingUserId BIGINT NOT NULL, 
	StartDateTime DATETIME NOT NULL,
	EndDateTime DATETIME NOT NULL,
	Enable bit NOT NULL,
	Reason VARCHAR(200) NOT NULL ,
	CONSTRAINT [PK_TblBiddingBlockList_BlockListId] PRIMARY KEY ([BlockListId]),	
	CONSTRAINT [FK_TblBiddingBlockList_tblmstuser] FOREIGN KEY ([PostUserId]) REFERENCES [tblmstusers]([userid]) 
  ) 

go 

CREATE TABLE TblAreaPreference 
  ( 
     preferenceId BIGINT IDENTITY(1, 1) NOT NULL, 
     UserId BIGINT NOT NULL, 
     Area VARCHAR(50) NOT NULL ,
     CONSTRAINT [PK_TblAreaPreference_preferenceId] PRIMARY KEY ([preferenceId]),	
CONSTRAINT [FK_TblAreaPreference_tblmstuser] FOREIGN KEY ([UserId]) REFERENCES [tblmstusers]([userid]) 
  ) 

go 


